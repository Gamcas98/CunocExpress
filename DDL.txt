DROP SCHEMA CONTROL_PAQUETES;

CREATE SCHEMA IF NOT EXISTS CONTROL_PAQUETES;

USE CONTROL_PAQUETES;

CREATE TABLE CUOTAS_PAQUETES(
id_cuota INT NOT NULL AUTO_INCREMENT,
precio_libra DOUBLE ,
tarifa_prioridad DOUBLE,
fecha DATE NOT NULL,
CONSTRAINT PK_CUOTA_PAQUETE PRIMARY KEY(Id_Cuota)
);

CREATE TABLE CUOTAS_PUNTO_CONTROL(
id_cuota INT NOT NULL AUTO_INCREMENT,
tarifa_operacion DOUBLE NOT NULL,
fecha DATE NOT NULL,
CONSTRAINT PK_CUOTA_PAQUETE PRIMARY KEY(Id_Cuota)
);

CREATE TABLE USUARIO(
Usuario VARCHAR(30) NOT NULL,
Contrasena VARCHAR(25) NOT NULL,
Tipo INT NOT NULL,
Estado VARCHAR (10) NOT NULL,
Nombre VARCHAR(30) NOT NULL,
Apellido VARCHAR(30) NOT NULL,
CONSTRAINT PK_USUARIO PRIMARY KEY(Usuario)
);

CREATE TABLE CLIENTE(
Nombre VARCHAR(30) NOT NULL,
Nit INT NOT NULL,
Telefono INT,
Direccion VARCHAR(30),
CONSTRAINT PK_CLIENTE PRIMARY KEY(Nit)
);

CREATE TABLE DESTINO(
nombre_destino VARCHAR(30) NOT NULL,
cuota_destino DOUBLE NOT NULL,
CONSTRAINT PK_DESTINO PRIMARY KEY(Nombre_Destino)
);


CREATE TABLE RUTA(
Nombre VARCHAR(30) NOT NULL,
Estado VARCHAR(10) NOT NULL,
Destino VARCHAR(30) NOT NULL,
CONSTRAINT PK_RUTA PRIMARY KEY (Nombre),
CONSTRAINT FK_DESTINO_IN_RUTA FOREIGN KEY (Destino) REFERENCES DESTINO(Nombre_Destino)
);

CREATE TABLE PUNTO_DE_CONTROL(
id_punto_control INT NOT NULL,
tarifa_operacion DOUBLE NOT NULL,
cantidad_paquetes INT NOT NULL,
Usuario VARCHAR(30) NOT NULL,
Ruta VARCHAR(30) NOT NULL,
Estado VARCHAR(10) NOT NULL,
Cola int not null,
CONSTRAINT PK_PUNTO_CONTROL PRIMARY KEY(Id_Punto_Control,Ruta),
CONSTRAINT FK_RUTA_IN_PUNTO_DE_CONTROL FOREIGN KEY (Ruta) REFERENCES RUTA(Nombre),
CONSTRAINT FK_USUARIO_IN_PUNTO_CONTROL FOREIGN KEY (Usuario) REFERENCES USUARIO(Usuario)
);

CREATE TABLE PAQUETE(
id_paquete INT NOT NULL AUTO_INCREMENT,
nit_cliente INT NOT NULL,
horas_en_ruta INT,
Posicion int,
Estado VARCHAR(25) NOT NULL,
fecha_ingreso DATE NOT NULL,
fecha_recepcion DATE,
tarifa_Prioridad DOUBLE NOT NULL,
tarifa_libra DOUBLE NOT NULL,
tarifa_destino DOUBLE NOT NULL,
Peso INT NOT NULL,
CONSTRAINT PK_PAQUETE PRIMARY KEY (Id_Paquete),
CONSTRAINT FK_USUARIO_IN_PAQUETE FOREIGN KEY (Nit_Cliente) REFERENCES CLIENTE(Nit)
);


USE CONTROL_PAQUETES;





